"use client"

import * as React from "react"

interface CarProps {
    className?: string
    color?: string
    size?: 'sm' | 'md' | 'lg' | 'xl' | 'viewer'
    style?: React.CSSProperties
    variant?: 'default' | 'blue' | 'green' | 'red' | 'purple' | 'orange'
    isViewer?: boolean
}

// Predefined color variants
const colorVariants = {
    default: '#3b82f6',
    blue: '#3b82f6',
    green: '#10b981',
    red: '#ef4444',
    purple: '#8b5cf6',
    orange: '#f97316'
}

const sizeClasses = {
    sm: 'w-16 h-20',
    md: 'w-24 h-32',
    lg: 'w-32 h-40 xl:w-48 xl:h-60',
    xl: 'w-32 h-40 md:w-48 md:h-60',
    viewer: 'w-32 h-40  xl:w-52 xl:h-64 4xl:w-64 4xl:h-80 '
}

export const Car = React.memo<CarProps>(({ className = '', color, size = 'md', style, variant = 'default', isViewer = false }) => {
    const sizeClass = sizeClasses[size]

    // Use variant color if no custom color provided
    const finalColor = color || colorVariants[variant]

    // Memoize the darken color calculation to prevent re-calculation on every render
    const darkerColor = React.useMemo(() => {
        // Function to darken a hex color
        const darkenColor = (hex: string, percent: number = 25): string => {
            // Remove # if present
            const cleanHex = hex.replace('#', '')

            // Convert to RGB
            const r = parseInt(cleanHex.substring(0, 2), 16)
            const g = parseInt(cleanHex.substring(2, 4), 16)
            const b = parseInt(cleanHex.substring(4, 6), 16)

            // Darken by reducing each component
            const darkenedR = Math.max(0, Math.floor(r * (1 - percent / 100)))
            const darkenedG = Math.max(0, Math.floor(g * (1 - percent / 100)))
            const darkenedB = Math.max(0, Math.floor(b * (1 - percent / 100)))

            // Convert back to hex
            const toHex = (n: number) => n.toString(16).padStart(2, '0')
            return `#${toHex(darkenedR)}${toHex(darkenedG)}${toHex(darkenedB)}`
        }

        return darkenColor(finalColor, 25)
    }, [finalColor])

    return (
        <svg
            viewBox="0 0 335.34 603.48"
            className={`${sizeClass} object-contain ${isViewer ? 'transform rotate-90' : ''} ${className}`}
            style={{
                '--car-primary': finalColor,
                '--car-darker': darkerColor,
                ...style
            } as React.CSSProperties}
            xmlns="http://www.w3.org/2000/svg"
        >
            <defs>
                <style>
                    {`
                        .car-cls-1 { fill: #276379; }
                        .car-cls-2 { fill: var(--car-primary); }
                        .car-cls-3 { fill: #327f93; }
                        .car-cls-4 { fill: var(--car-darker); }
                        .car-cls-5 { fill: #2f405c; }
                        .car-cls-6 { fill: #182d3f; opacity: 0.4; }
                        .car-cls-7 { fill: #233044; }
                    `}
                </style>
            </defs>

            <g id="Layer_5" data-name="Layer 5">
                <path className="car-cls-6" d="M66.62,388.06c3.05,1.89,6.09,2.81,8.65,3.24.19,12.39.47,24.43.89,35.97,1.99,54.55,7.11,97.82,19.96,112.91,7.75,9.09,21.3,15.04,36.02,18.93,22.98,6.07,48.78,7.12,59.75,7.28,3.4.05,5.38.01,5.4.01.02,0,2,.04,5.4-.01,10.97-.16,36.77-1.21,59.75-7.28,14.72-3.89,28.28-9.84,36.02-18.93,12.88-15.11,17.99-58.5,19.97-113.18.42-11.46.7-23.41.88-35.7,2.57-.43,5.61-1.35,8.65-3.24,7.67-4.77,8.15-17.03,6.72-17.2-.88-.1-8.84,3.85-15.21,7.48.33-32.97.1-67.92.1-102,0-94.94,1.49-169.06-3.33-209.39-.93-7.77-2.09-14.29-3.55-19.45C303.71,15.52,275.96,0,197.31,0h0c-78.66,0-106.4,15.52-115.41,47.5-1.4,4.98-2.53,11.2-3.44,18.59-4.95,40.13-3.43,114.64-3.43,210.25,0,34.08-.23,69.03.1,102-6.37-3.63-14.32-7.59-15.21-7.48-1.44.17-.96,12.43,6.72,17.2Z" />
            </g>
            <g id="Layer_1-2" data-name="Layer 1">
                <path className="car-cls-2" d="M138.04,37.06c-78.66,0-106.4,15.51-115.41,47.5-9.01,31.98-6.88,115.62-6.88,228.84s-2.5,236.13,21.12,263.85c23.62,27.72,101.17,26.23,101.17,26.23V37.06Z" />
                <path className="car-cls-2" d="M138.04,37.06c78.66,0,106.4,15.51,115.41,47.5,9.01,31.98,6.88,115.62,6.88,228.84s2.5,236.13-21.12,263.85c-23.62,27.72-101.17,26.23-101.17,26.23V37.06Z" />
            </g>
            <g id="Layer_3" data-name="Layer 3">
                <path className="car-cls-4" d="M22.63,84.56c9.01-31.98,36.75-47.5,115.42-47.5v18.52c-56.68,0-74.45-3.56-86.91,18.07-12.46,21.63-5.54,37.46-5.54,37.46l15.89,36.3s-5.7,9.73-5.89,47.11c0,41.82-11.91,82.44-11.91,82.44,0,0,8.38,86,9.05,90.46s10.44,8.02,10.44,8.02l7.82,23.6-30.9,49.21s-6.77,17.6-6.32,44.28c.45,26.67,5.35,59.72,9.56,70.53,4.2,10.81,28.91,29.32,94.73,29.32v11.1s-77.56,1.49-101.18-26.22c-23.62-27.72-21.11-150.63-21.11-263.85s-2.13-196.85,6.88-228.84Z" />
                <path className="car-cls-4" d="M30.86,433.64l-8.15-5.11s-7.67,1.36-15.35-3.41c-7.67-4.77-8.15-17.03-6.72-17.2,1.44-.17,21.58,10.39,23.18,12.86,1.6,2.47,7.03,4.73,7.03,4.73v8.13Z" />
                <path className="car-cls-4" d="M253.45,84.56c-9.01-31.98-36.75-47.5-115.42-47.5v18.52c56.68,0,74.45-3.56,86.91,18.07,12.46,21.63,5.54,37.46,5.54,37.46l-15.89,36.3s5.89,11.99,5.89,47.11c0,41.82,11.91,82.44,11.91,82.44,0,0-8.38,86-9.05,90.46s-10.44,8.02-10.44,8.02l-7.82,23.6,30.9,49.21s6.77,17.6,6.32,44.28c-.45,26.67-5.35,59.72-9.56,70.53-4.2,10.81-28.91,29.32-94.73,29.32v11.1s77.56,1.49,101.18-26.22c23.62-27.72,21.11-150.63,21.11-263.85s2.13-196.85-6.88-228.84Z" />
                <path className="car-cls-4" d="M245.22,433.64l8.15-5.11s7.67,1.36,15.35-3.41c7.67-4.77,8.15-17.03,6.72-17.2-1.44-.17-21.58,10.39-23.18,12.86-1.6,2.47-7.03,4.73-7.03,4.73v8.13Z" />
            </g>
            <g id="Layer_4" data-name="Layer 4">
                <path className="car-cls-5" d="M138.04,74.8c-58.54,0-99.37,20.47-99.37,20.47l22.82,52.13s45.33-7.36,76.56-7.36v-65.25Z" />
                <path className="car-cls-5" d="M38.67,136.85s-6,13.43-6,35.82-1.8,71.32-1.8,117.38v143.59s22.22-29.19,22.22-76.5,2.7-122.1,2.7-156.32-17.11-63.97-17.11-63.97Z" />
                <path className="car-cls-5" d="M40.08,448.24s19.29-34.55,23.08-72.81c0,0,29.84,10.25,74.88,10.25v85.71c-65.75,0-97.96-23.15-97.96-23.15Z" />
                <path className="car-cls-5" d="M39.26,546.9s2.2,21.98,10.15,29.38c7.96,7.39,40.64,12.05,40.64,12.05,0,0-9.7-4.25-21.84-18.64s-20.75-10.42-28.96-22.79Z" />
                <path className="car-cls-5" d="M45.59,111.1s-3.2-7.21-8.51-17.69c-5.3-10.47,9.57-19.33,13.48-18.61s12.42,11.26,12.42,11.26c0,0-14.09,5.04-15.5,8.01-3.75,7.87-1.89,17.03-1.89,17.03Z" />
                <path className="car-cls-7" d="M138.04,74.8c58.54,0,99.37,20.47,99.37,20.47l-22.82,52.13s-45.33-7.36-76.56-7.36v-65.25Z" />
                <path className="car-cls-7" d="M237.41,136.85s6,13.43,6,35.82,1.8,71.32,1.8,117.38v143.59s-22.22-29.19-22.22-76.5-2.7-122.1-2.7-156.32,17.11-63.97,17.11-63.97Z" />
                <path className="car-cls-7" d="M236,448.24s-19.29-34.55-23.08-72.81c0,0-29.84,10.25-74.88,10.25v85.71c65.75,0,97.96-23.15,97.96-23.15Z" />
                <path className="car-cls-5" d="M226.1,440.84s-13.78-27.69-18.33-59.28c0,0-27.79,8.84-69.73,8.84v67.07c61.23,0,88.06-16.63,88.06-16.63Z" />
                <path className="car-cls-1" d="M49.98,440.84s13.78-27.69,18.33-59.28c0,0,27.79,8.84,69.73,8.84v67.07c-61.23,0-88.06-16.63,88.06-16.63Z" />
                <path className="car-cls-7" d="M230.48,111.1s3.2-7.21,8.51-17.69c5.3-10.47-9.57-19.33-13.48-18.61s-12.42,11.26-12.42,11.26c0,0,14.09,5.04,15.5,8.01,3.75,7.87,1.89,17.03,1.89,17.03Z" />
                <path className="car-cls-5" d="M236.82,546.9s-2.2,21.98-10.15,29.38-40.64,12.05-40.64,12.05c0,0,9.7-4.25,21.84-18.64,12.13-14.38,20.75-10.42,28.96-22.79Z" />
                <path className="car-cls-5" d="M138.04,87.55c35.11,0,62.87,6.28,77.85,10.61,6.61,1.91,10.05,9.18,7.32,15.5l-12.07,28.04s-44.5-6.98-73.11-6.98v-47.17Z" />
                <path className="car-cls-1" d="M138.04,87.55c-35.11,0-62.87,6.28-77.85,10.61-6.61,1.91-10.05,9.18-7.32,15.5l12.07,28.04s44.5-6.98,73.11-6.98v-47.17Z" />
                <path className="car-cls-7" d="M213.72,582.34s.01-.01.01-.01c9.73-5.37,10.65-25.08,10.65-25.08h0c4.47-2.26,8.51-4.43,12.44-10.36,0,0-2.19,21.98-10.15,29.38-2.49,2.31-7.38,4.35-12.95,6.07Z" />
                <path className="car-cls-1" d="M62.35,582.34s-.01-.01-.01-.01c-9.73-5.37-10.65-25.08-10.65-25.08h0c-4.47-2.26-8.51-4.43-12.44-10.36,0,0,2.19,21.98,10.15,29.38,2.49,2.31,7.38,4.35,12.95,6.07Z" />
                <path className="car-cls-3" d="M132.16,450.02c2.51-3.76,3.05-11.91,1.52-18.82-1.53-6.91-13.33-6.06-16.38-1.78-3.05,4.28-7.33,9.34-14.87,8.73-7.54-.61-8.54-4.77-16.29-5.29-7.75-.52-10.96,3.11-16.68.09-5.72-3.03-1.13-13.15-4-14.59-1.57-.79-3.49,4.15-5.17,9.22-1.4,4.2-2.84,8.39-1.96,10.48,1.96,4.6,16.04,9.71,38.44,13.18,22.4,3.47,32.88,2.54,35.4-1.21Z" />
                <path className="car-cls-3" d="M133.06,110.17c2.08-5.33,1.78-14.73-.81-17.63-2.59-2.9-21.7-.71-40.28,2.04-16.59,2.46-31.6,5.98-35.1,9.88s3.91,20.32,6.33,19.19c2.43-1.13-3.81-12.39,3.81-15.68,7.62-3.29,11.68.95,18.87.91,7.19-.04,10.98-4.1,17.72-3.16,6.74.94,9.01,2.04,13,6.11,3.99,4.07,14.38,3.68,16.46-1.65Z" />
                <polygon className="car-cls-4" points="221.02 259.39 247.85 243.77 248.97 277.56 221.45 285.24 221.02 259.39" />
                <polygon className="car-cls-4" points="55.06 259.39 28.23 243.77 27.11 277.56 54.63 285.24 55.06 259.39" />
            </g>
        </svg>
    )
})

Car.displayName = 'Car'
